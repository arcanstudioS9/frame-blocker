<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Frame Blocker â€” YouTube & TikTok</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 20px; background: #f5f7fb; color: #111; }
    .box { background: white; border-radius: 10px; padding: 16px; box-shadow: 0 6px 18px rgba(20,30,60,0.06); max-width:920px; margin:12px auto;}
    label{display:block;margin-bottom:8px;font-weight:600}
    input[type="url"]{width:100%;padding:10px;border-radius:6px;border:1px solid #dfe6ef;font-size:16px}
    .controls{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
    button{padding:10px 14px;border-radius:8px;border:0;background:#2563eb;color:#fff;font-weight:600;cursor:pointer}
    button.secondary{background:#eef2ff;color:#1f2d7a;border:0}
    .chip{background:#eef2ff;color:#29318a;padding:6px 10px;border-radius:999px;font-weight:600;font-size:13px}
    .frame-wrap{margin-top:16px;position:relative;height:540px;border-radius:8px;overflow:hidden;background:#00000006}
    iframe{width:100%;height:100%;border:0;display:block}
    .blocked-overlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;background:linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.35));color:white;text-align:center;padding:18px}
    .blocked-overlay h1{margin:0;font-size:32px}
    .blocked-overlay p{margin:0;font-size:15px;opacity:0.95}
    .small{font-size:13px;color:#666;margin-top:10px}
    .blocked-placeholder{display:flex;align-items:center;justify-content:center;height:220px;border-radius:8px;background:#fff2f2;color:#8b0000;padding:12px;font-weight:700}
  </style>
</head>
<body>
  <div class="box">
    <h2>Frame loader with YouTube & TikTok blocker</h2>
    <p class="small">Type a URL and click <strong>Load</strong>. Pages that are on YouTube or TikTok will be blocked from being loaded in the frame.</p>

    <label for="url">URL to load in frame</label>
    <input id="url" type="url" placeholder="https://example.com or https://www.youtube.com/..." />
    <div class="controls">
      <button id="loadBtn">Load</button>
      <button id="clearBtn" class="secondary">Clear</button>
      <div class="chip">Blocking: youtube.com, youtu.be, tiktok.com</div>
    </div>

    <div class="frame-wrap" id="frameWrap">
      <iframe id="siteFrame" sandbox="allow-scripts allow-forms allow-popups allow-modals" srcdoc="<p style='padding:18px;color:#333'>No page loaded. Enter a URL above and click Load.</p>"></iframe>

      <div id="blockedOverlay" class="blocked-overlay" style="display:none; pointer-events:auto;">
        <h1>ðŸ”’ Blocked</h1>
        <p id="blockedReason">This site is not allowed to load inside a frame on this page.</p>
        <p id="blockedDetails" style="font-size:13px;opacity:0.95"></p>
        <p class="small">If you control the site and need it embedded, update the site's embedding policy or change the blocker settings in the code.</p>
      </div>
    </div>
  </div>

  <script>
    // Simple blocked-host check
    const blockedDomains = ['youtube.com','youtu.be','tiktok.com'];
    const urlInput = document.getElementById('url');
    const loadBtn = document.getElementById('loadBtn');
    const clearBtn = document.getElementById('clearBtn');
    const blockedOverlay = document.getElementById('blockedOverlay');
    const blockedReason = document.getElementById('blockedReason');
    const blockedDetails = document.getElementById('blockedDetails');
    const siteFrame = document.getElementById('siteFrame');

    function normalizeUrl(raw) {
      if (!raw) return '';
      raw = raw.trim();
      // add https if missing
      if (!/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//.test(raw)) raw = 'https://' + raw;
      return raw;
    }

    function isBlocked(href) {
      try {
        const u = new URL(normalizeUrl(href));
        const host = u.hostname.toLowerCase();
        return blockedDomains.some(d => host === d || host.endsWith('.' + d));
      } catch (e) {
        return false;
      }
    }

    function showBlocked(href) {
      blockedOverlay.style.display = 'flex';
      blockedReason.textContent = 'Embedding of this site is blocked by policy.';
      blockedDetails.textContent = 'Blocked URL: ' + href;
      // clear iframe content so it doesn't attempt to load
      siteFrame.srcdoc = '<p style="padding:18px;color:#333">Blocked content.</p>';
    }

    function hideBlocked() {
      blockedOverlay.style.display = 'none';
    }

    loadBtn.addEventListener('click', () => {
      const raw = urlInput.value.trim();
      if (!raw) {
        alert('Enter a URL (e.g. https://example.com).');
        return;
      }
      const href = normalizeUrl(raw);
      if (isBlocked(href)) {
        showBlocked(href);
        return;
      }
      hideBlocked();
      // set iframe src to the allowed URL
      siteFrame.src = href;
    });

    clearBtn.addEventListener('click', () => {
      urlInput.value = '';
      siteFrame.srcdoc = '<p style="padding:18px;color:#333">No page loaded. Enter a URL above and click Load.</p>';
      hideBlocked();
    });

    // Watch for iframes added dynamically anywhere in the document and remove/replace blocked ones
    function scanAndReplaceIframes(root=document) {
      const iframes = root.querySelectorAll ? root.querySelectorAll('iframe') : [];
      iframes.forEach(f => {
        try {
          const src = f.getAttribute('src') || f.getAttribute('data-src') || '';
          if (src && isBlocked(src)) {
            const placeholder = document.createElement('div');
            placeholder.className = 'blocked-placeholder';
            placeholder.textContent = 'Embedded content blocked (YouTube or TikTok)';
            f.replaceWith(placeholder);
          }
        } catch(e){}
      });
    }

    const mo = new MutationObserver(muts => {
      muts.forEach(m => {
        if (m.addedNodes && m.addedNodes.length) {
          m.addedNodes.forEach(n => {
            if (n.nodeType === 1) {
              if (n.tagName === 'IFRAME') {
                const src = n.getAttribute('src') || n.getAttribute('data-src') || '';
                if (src && isBlocked(src)) {
                  const placeholder = document.createElement('div');
                  placeholder.className = 'blocked-placeholder';
                  placeholder.textContent = 'Embedded content blocked (YouTube or TikTok)';
                  n.replaceWith(placeholder);
                }
              } else {
                // scan inside the newly added node
                scanAndReplaceIframes(n);
              }
            }
          });
        }
      });
    });
    mo.observe(document.body, { childList: true, subtree: true });

    // initial scan (in case)
    scanAndReplaceIframes();

    // optional: when iframe finishes loading check the src again
    siteFrame.addEventListener('load', () => {
      try {
        if (isBlocked(siteFrame.src)) {
          showBlocked(siteFrame.src);
        } else {
          hideBlocked();
        }
      } catch(e){}
    });
  </script>
</body>
</html>
